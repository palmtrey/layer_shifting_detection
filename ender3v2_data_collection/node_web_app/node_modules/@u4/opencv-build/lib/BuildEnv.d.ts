/// <reference types="node" />
import { AutoBuildFile, EnvSummery } from './types.js';
/**
 * options passed to OpenCVBuildEnv constructor
 * highest priority values
 */
export interface OpenCVBuildEnvParamsBool {
    autoBuildBuildCuda?: boolean;
    autoBuildWithoutContrib?: boolean;
    disableAutoBuild?: boolean;
    keepsources?: boolean;
    'dry-run'?: boolean;
    'git-cache'?: boolean;
}
declare type boolKey = keyof OpenCVBuildEnvParamsBool;
export interface OpenCVBuildEnvParamsString {
    /**
     * OpenCV-build root directory, deprecated in favor of buildRoot
     */
    rootcwd?: string;
    /**
     * OpenCV build directory, this directory will be populate with a folder per build, permiting to reused previous build.
     */
    buildRoot?: string;
    /**
     * OpenCV version to build
     */
    autoBuildOpencvVersion?: string;
    /**
     * OpenCV cMake Build flags
     */
    autoBuildFlags?: string;
    /**
     * OpenCV include directory
     * looks like: opencv/build/include
     */
    opencvIncludeDir?: string;
    /**
     * OpenCV library directory
     * looks like: opencv/build/.../lib
     */
    opencvLibDir?: string;
    /**
     * OpenCV bin directory
     * looks like: opencv/build/.../bin
     */
    opencvBinDir?: string;
}
declare type stringKey = keyof OpenCVBuildEnvParamsString;
/**
 * Options as usable in opencv4nodejs section from package.json
 * Middle priority values
 */
export declare type OpenCVPackageBuildOptions = {
    [key in boolKey | stringKey]?: string;
};
export interface OpenCVBuildEnvParams extends OpenCVBuildEnvParamsBool, OpenCVBuildEnvParamsString {
    /**
     * Allow speedup API usage by allowing direct access to a preexisting build
     */
    prebuild?: 'latestBuild' | 'latestVersion' | 'oldestBuild' | 'oldestVersion';
    extra?: {
        [key: string]: string;
    };
}
/**
 * local args parser model
 */
interface ArgInfo {
    arg: string;
    conf: keyof OpenCVPackageBuildOptions;
    env: string;
    isBool: boolean;
    doc: string;
}
/**
 * list of variables needed to link and use openCV
 */
export declare const OPENCV_PATHS_ENV: readonly ["OPENCV_BIN_DIR", "OPENCV_INCLUDE_DIR", "OPENCV_LIB_DIR"];
/**
 * arguments data
 */
export declare const ALLARGS: {
    version: ArgInfo;
    flags: ArgInfo;
    root: ArgInfo;
    buildRoot: ArgInfo;
    cuda: ArgInfo;
    nocontrib: ArgInfo;
    nobuild: ArgInfo;
    OPENCV_INCLUDE_DIR: ArgInfo;
    OPENCV_LIB_DIR: ArgInfo;
    OPENCV_BIN_DIR: ArgInfo;
    keepsources: ArgInfo;
    dryRun: ArgInfo;
    gitCache: ArgInfo;
};
/**
 * generate help message
 * @returns help message as text with colors
 */
export declare const genHelp: () => string;
/**
 * A basic args parser
 * @param args cmd lines args
 * @returns and openCVBuildEnvParams object containing an extra object with all unknown args
 */
export declare const args2Option: (args: string[]) => OpenCVBuildEnvParams;
/**
 * All available module fron openCV 4.5.5
 */
export declare const ALL_OPENCV_MODULES: readonly ["apps", "aruco", "bgsegm", "bioinspired", "calib3d", "ccalib", "core", "datasets", "dnn", "dnn_objdetect", "dpm", "features2d", "flann", "fuzzy", "gapi", "hfs", "highgui", "img_hash", "imgcodecs", "imgproc", "java_bindings_generator", "js", "js_bindings_generator", "line_descriptor", "ml", "objc_bindings_generator", "objdetect", "optflow", "phase_unwrapping", "photo", "python3", "python_bindings_generator", "python_tests", "reg", "rgbd", "saliency", "shape", "stereo", "stitching", "structured_light", "superres", "surface_matching", "ts", "video", "videoio", "wechat_qrcode", "world", "xobjdetect", "xphoto"];
/**
 * type of valid openCV Modules
 */
export declare type OpencvModulesType = typeof ALL_OPENCV_MODULES[number];
export declare class OpenCVBuildEnv implements OpenCVBuildEnvParamsBool, OpenCVBuildEnvParamsString {
    #private;
    private opts;
    prebuild?: 'latestBuild' | 'latestVersion' | 'oldestBuild' | 'oldestVersion';
    opencvVersion: string;
    buildWithCuda: boolean;
    isWithoutContrib: boolean;
    isAutoBuildDisabled: boolean;
    keepsources: boolean;
    dryRun: boolean;
    gitCache: boolean;
    autoBuildFlags: string;
    rootcwd: string;
    buildRoot: string;
    packageRoot: string;
    protected _platform: NodeJS.Platform;
    private no_autobuild;
    private resolveValue;
    constructor(opts?: OpenCVBuildEnvParams);
    /**
     * complet initialisation.
     */
    private getReady;
    get enabledModules(): OpencvModulesType[];
    enableModule(mod: OpencvModulesType): void;
    disableModule(mod: OpencvModulesType): void;
    /**
     * @returns return cmake flags like: -DBUILD_opencv_modules=ON ...
     */
    getCmakeBuildFlags(): string[];
    getSharedCmakeFlags(): string[];
    getCongiguredCmakeFlags(): string[];
    dumpEnv(): EnvSummery;
    /**
     * extract opencv4nodejs section from package.json if available
     */
    private parsePackageJson;
    numberOfCoresAvailable(): number;
    /**
     * get opencv4nodejs section from package.json if available
     * @returns opencv4nodejs customs
     */
    readEnvsFromPackageJson(): {
        [key: string]: string | boolean | number;
    };
    /**
     * openCV uniq version prostfix, used to avoid build path colision.
     */
    get optHash(): string;
    listBuild(): Array<{
        autobuild: string;
        dir: string;
        date: Date;
    }>;
    get platform(): NodeJS.Platform;
    get isWin(): boolean;
    get rootDir(): string;
    get opencvRoot(): string;
    get opencvGitCache(): string;
    get opencvContribGitCache(): string;
    get opencvSrc(): string;
    get opencvContribSrc(): string;
    get opencvContribModules(): string;
    get opencvBuild(): string;
    get opencvInclude(): string;
    get opencv4Include(): string;
    get opencvIncludeDir(): string;
    get opencvLibDir(): string;
    get opencvBinDir(): string;
    get autoBuildFile(): string;
    readAutoBuildFile(): AutoBuildFile | undefined;
    private readAutoBuildFile2;
}
export {};
